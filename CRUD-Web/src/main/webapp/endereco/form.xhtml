<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/tags">

	<p:outputPanel id="enderecoDetail" style="text-align:center;">
		<h:panelGroup id="enderecoPanel" rendered="#{not empty endereco}">

			<c:choose>
				<c:when test="#{not createEntity}">
					<div class="control-group">
						<h:outputLabel for="enderecoId" value="Id"
							styleClass="control-label" />
						<h:outputText id="enderecoId" value="#{endereco.id}" label="Id"
							styleClass="controls" style="float: left;margin-left: 20px;" />
					</div>
					<div class="control-group">
						<h:outputLabel for="pessoaNome" value="Nome"
							styleClass="control-label" />
						<h:outputText id="pessoaNome" value="#{endereco.pessoa.nome}"
							label="Nome" styleClass="controls"
							style="float: left;margin-left: 20px;" />
					</div>
				</c:when>
				<c:otherwise>
					<div class="control-group">
						<h:outputLabel for="pessoaNome" value="Nome"
							styleClass="control-label" />
						<div class="controls" style="float: left; margin-left: 20px;">
							<p:autoComplete id="pessoaNome" value="#{endereco.pessoa}"
								var="p" itemLabel="#{p.nome}" itemValue="#{p}"
								converter="pessoaConvert" forceSelection="true"
								minQueryLength="1" effect="fade" queryDelay="300"
								completeMethod="#{enderecoMB.buscaPessoas}"
								styleClass="input-large">
								<p:ajax event="itemSelect" listener="#{enderecoMB.onItemSelect}"
									update="mensagens" />
							</p:autoComplete>
							<p:message for="pessoaNome" styleClass="alert alert-error" />
						</div>
					</div>
				</c:otherwise>
			</c:choose>

			<div class="control-group">
				<h:outputLabel for="enderecoRua" value="Rua"
					styleClass="control-label" />
				<div class="controls" style="float: left; margin-left: 20px;">
					<p:inputText id="enderecoRua" value="#{endereco.rua}" label="Rua"
						styleClass="input-large" />
					<p:message for="enderecoRua" styleClass="alert alert-error" />
				</div>
			</div>

			<div class="control-group">
				<h:outputLabel for="enderecoBairro" value="Bairro"
					styleClass="control-label" />
				<div class="controls" style="float: left; margin-left: 20px;">
					<p:inputText id="enderecoBairro" value="#{endereco.bairro}"
						label="Bairro" styleClass="input-large" />
					<p:message for="enderecoBairro" styleClass="alert alert-error" />
				</div>
			</div>

			<div class="control-group">
				<h:outputLabel for="enderecoTelefone" value="Telefone"
					styleClass="control-label" />
				<div class="controls" style="float: left; margin-left: 20px;">
					<p:inputText id="enderecoTelefone" value="#{endereco.telefone}"
						label="Telefone" styleClass="input-large" />
					<p:message for="enderecoTelefone" styleClass="alert alert-error" />
				</div>
			</div>

			<div class="control-group">
				<div class="controls">
					<c:choose>
						<c:when test="#{not createEntity}">
							<p:commandButton value="Atualiza"
								actionListener="#{enderecoMB.updateEntity}"
								styleClass="btn btn-success"
								oncomplete="handleUpdateRequest(xhr, status, args);"
								process="@form" />
							<sec:authorize access="hasRole('ROLE_ADMIN')">
								<p:commandButton value="Exclui"
									actionListener="#{enderecoMB.removeEntity}"
									styleClass="btn btn-danger"
									oncomplete="handleUpdateRequest(xhr, status, args);"
									update="enderecoTable:totalRows" immediate="true"
									rendered="#{not createEntity}" />
							</sec:authorize>
							<p:button value="Cancela" onclick="PF('enderecoDialog').hide();"
								styleClass="btn" />
						</c:when>
						<c:otherwise>
							<p:commandButton value="Salva"
								action="#{enderecoMB.createEntity}" styleClass="btn btn-success"
								update="enderecoPanel" process="@form" />
						</c:otherwise>
					</c:choose>
				</div>
			</div>
		</h:panelGroup>
	</p:outputPanel>
	<c:if test="#{not createEntity}">
		<p:remoteCommand name="atualizaFomulario" update="enderecoPanel" />

		<h:outputScript library="js" name="list.page.js" />

		<script type="text/javascript">
			function handleUpdateRequest(xhr, status, args) {
				updateListPage("mensagens", "enderecoTable", "enderecoDialog",
						args);
			}
		</script>
	</c:if>
</ui:fragment>